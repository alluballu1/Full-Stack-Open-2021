(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(19),a=n.n(c),u=n(10),r=n(3),i=n(2),o=n(0),d=function(e){var t=e.persons,n=e.deletion;return Object(o.jsx)("div",{children:Object(o.jsx)("table",{children:Object(o.jsx)("tbody",{children:t.map((function(e,t){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.name}),Object(o.jsx)("td",{children:e.number}),Object(o.jsx)("td",{children:Object(o.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"Delete"})})]},t)}))})})})},s=function(e){var t=e.filterValue,n=e.filterInput;return Object(o.jsxs)("div",{children:["filter shown with"," ",Object(o.jsx)("input",{type:"text",value:t,onChange:n,id:"filter"})]})},l=function(e){var t=e.nameValue,n=e.nameChangeFunction,c=e.numValue,a=e.numChangeFunction,u=e.submit;return Object(o.jsxs)("form",{onSubmit:u,children:[Object(o.jsxs)("div",{children:["name:"," ",Object(o.jsx)("input",{type:"text",value:t,onChange:n,id:"name"})]}),Object(o.jsxs)("div",{children:["number:"," ",Object(o.jsx)("input",{type:"text",value:c,onChange:a,id:"num"})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},m=n(5),j=n.n(m),b="http://localhost:3001/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},f=function(e){return j.a.post(b,e)},O=function(e,t,n){return j.a.put("".concat(b,"/").concat(e),{number:t,name:n})},x=function(e){var t=b+"/"+e.toString();return j.a.delete(t)},v=(n(43),function(e){var t=e.name;switch(e.type){case"add":return Object(o.jsx)("div",{className:"addmessage",children:Object(o.jsxs)("p",{className:"text",children:[t," has been added to the database."]})});case"missing":return Object(o.jsx)("div",{className:"errormessage",children:Object(o.jsxs)("p",{className:"text",children:[t," has already been deleted from the database."]})})}}),p=function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(""),m=Object(r.a)(a,2),j=m[0],b=m[1],p=Object(i.useState)(!1),g=Object(r.a)(p,2),y=g[0],I=g[1],w=Object(i.useState)(""),E=Object(r.a)(w,2),B=E[0],C=E[1],S=Object(i.useState)(""),V=Object(r.a)(S,2),k=V[0],N=V[1],F=Object(i.useState)(""),D=Object(r.a)(F,2),J=D[0],L=D[1],T=Object(i.useState)(""),A=Object(r.a)(T,2),P=A[0],q=A[1];Object(i.useEffect)((function(){h().then((function(e){return c(e)}))}),[]);var z=function(e,t){b(e),C(t),I(!0),setTimeout((function(){I(!1)}),5e3)};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(s,{filterValue:P,filterInput:function(e){q(e.target.value)}}),y?Object(o.jsx)(v,{name:j,type:B}):null,Object(o.jsx)("h2",{children:"Add a new"}),Object(o.jsx)(l,{nameValue:k,nameChangeFunction:function(e){N(e.target.value)},numValue:J,numChangeFunction:function(e){L(e.target.value),console.log(J)},submit:function(e){if(e.preventDefault(),-1===n.findIndex((function(e){return e.name===document.getElementById("name").value}))){var t={name:document.getElementById("name").value,number:document.getElementById("num").value},a=document.getElementById("name").value;f(t).then((function(e){console.log(e);var t={name:e.data.name,number:e.data.number,id:e.data.id};c([].concat(Object(u.a)(n),[t])),N(""),L(""),z(a,"add")}))}else if(window.confirm("".concat(document.getElementById("name").value," is already added to phonebook, do you want to update the number?"))&&""!==document.getElementById("name")&&""!==document.getElementById("num")){var r=document.getElementById("num").value,i=n.findIndex((function(e){return e.name===document.getElementById("name").value})),o=n[i].id;O(o,r,n[i].name);var d=Object(u.a)(n);d[i].number=r,c(d)}}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(d,{deletion:function(e,t){return function(e,t){console.log(e),c(n.filter((function(t){return t.id!==e}))),window.confirm("Delete "+t+"?")&&x(e).then((function(e){return console.log(e.statusText)})).catch((function(e){return z(t,"missing")}))}(e,t)},persons:n.filter((function(e){return!0===e.name.toLowerCase().includes(P.toLowerCase())}))})]})};a.a.render(Object(o.jsx)(p,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.99354ce7.chunk.js.map